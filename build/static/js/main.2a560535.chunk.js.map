{"version":3,"sources":["panels/ResizePage.js","panels/WhidePhotoPage.js","App.js","index.js"],"names":["ResizePage","id","useState","Photoheight","setPhotoheight","Photowidth","setPhotowidth","img","setImg","imagesrc","setimagesrc","resize","width","height","activeImage","Image","src","onload","canvas","document","getElementById","canvasCtx","getContext","Math","floor","drawImage","base64","toDataURL","style","display","top","onChange","e","target","value","FR","FileReader","addEventListener","result","readAsDataURL","files","controlSize","WhidePhoto","Allert","setAllert","setPhotoEnecoded","window","screen","whg","setwhg","createElement","video","streaming","setStreaming","imageData","setImageData","heightVid","setHeightVid","a","navigator","mediaDevices","getUserMedia","audio","then","stream","widthVid","setAttribute","srcObject","catch","err","console","log","context","translate","scale","base64dataUrl","resizerr","wh","onClick","initCam","takePhoto","stretched","App","activeStory","setActiveStory","popout","onStoryChange","currentTarget","dataset","story","isDesktop","innerWidth","platform","scheme","header","separator","justifyContent","fixed","maxWidth","disabled","backgroundColor","borderRadius","before","animate","spaced","tabbar","selected","text","activePanel","WhidePhotoPage","ReactDOM","render"],"mappings":"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","file":"static/js/main.2a560535.chunk.js","sourcesContent":["import { useState } from 'react';\r\nimport { FormItem, Group, Input, Panel, File, PanelHeader } from \"@vkontakte/vkui\"\r\n\r\nconst ResizePage = (id) => {\r\n\r\n\r\n    const [Photoheight, setPhotoheight] = useState(512)\r\n    const [Photowidth, setPhotowidth] = useState(512)\r\n    const [img, setImg] = useState('')\r\n    const [imagesrc, setimagesrc] = useState(\"\")\r\n\r\n\r\n    function resize(width, height) {\r\n        let activeImage = new Image()\r\n        activeImage.src = imagesrc\r\n\r\n        activeImage.onload = () => {\r\n            const canvas = document.getElementById(\"canvas\")\r\n            const canvasCtx = canvas.getContext(\"2d\");\r\n\r\n            canvas.width = Math.floor(width);\r\n            canvas.height = Math.floor(height);\r\n\r\n            canvasCtx.drawImage(activeImage, 0, 0, Math.floor(width), Math.floor(height));\r\n            let base64 = canvas.toDataURL('image/png');\r\n            setImg(base64)\r\n        }\r\n\r\n\r\n    }\r\n\r\n    const fileSelect = (e) => {\r\n        var FR = new FileReader();\r\n\r\n        FR.addEventListener(\"load\", function (e) {\r\n\r\n            setimagesrc(e.target.result)\r\n            resize(512, 512);\r\n\r\n\r\n\r\n        });\r\n\r\n        FR.readAsDataURL(e.target.files[0]);\r\n\r\n    }\r\n\r\n    const widhChane = (e) => {\r\n        setPhotowidth(e.target.value)\r\n        resize(e.target.value, Photoheight);\r\n    }\r\n\r\n    const heightChane = (e) => {\r\n        setPhotoheight(e.target.value)\r\n        resize(Photowidth, e.target.value);\r\n    }\r\n\r\n\r\n    return (\r\n        <Panel id={id}>\r\n            <PanelHeader>Размеры</PanelHeader>\r\n            <Group>\r\n                <canvas style={{display: \"none\"}} id='canvas' height={512} width={512}></canvas>\r\n                <img id='image' src={img}></img>\r\n                <FormItem top=\"↨\">\r\n                    <Input onChange={widhChane}></Input>\r\n                </FormItem>\r\n                <FormItem top=\"↔\">\r\n                    <Input onChange={heightChane}></Input>\r\n                </FormItem>\r\n                <FormItem top=\"\">\r\n                    <File onChange={fileSelect} controlSize=\"m\">Выбрать фото </File>\r\n                </FormItem>\r\n            </Group>\r\n        </Panel>\r\n    )\r\n}\r\n\r\nexport default ResizePage;","import {Button, Group, Panel, PanelHeader, Title} from \"@vkontakte/vkui\";\r\nimport React, { useState } from 'react';\r\n  \r\n\r\n\r\nconst WhidePhoto = (id)=>{\r\n\r\n    const [Allert, setAllert] = useState()\r\n    const [ , setPhotoEnecoded] = useState()\r\n    const [whg, setwhg] = useState(window.screen.width-12)\r\n\tconst [canvas, ] = useState(document.createElement(\"canvas\"))\r\n\tconst [video, ] = useState(document.createElement(\"video\"))\r\n\tconst [streaming, setStreaming] = useState(false)\r\n\tconst [imageData, setImageData] = useState('')\r\n\tconst widthVid = 320\r\n\tconst [heightVid, setHeightVid] = useState()\r\n\r\n  \r\n   \r\n async function initCam(){\r\n\t  \r\n\tawait navigator.mediaDevices.getUserMedia({video: true, audio: false})\r\n\t.then(async function(stream) {\r\n\r\n\t\t\t\r\n\t\tsetHeightVid(widthVid / (4/3))\r\n\t\r\n  \r\n\tvideo.setAttribute('width', whg);\r\n\tvideo.setAttribute('autoplay', true);\r\n\tvideo.setAttribute('height', heightVid);\r\n\tcanvas.setAttribute('width', whg);\r\n\tcanvas.setAttribute('height', heightVid);\r\n\r\n\t  video.srcObject = stream;\r\n\t  await setStreaming(true)\r\n\r\n\r\n\r\n\t})\r\n\t.catch(function(err) {\r\n\t\tconsole.log(err);\r\n        setAllert(<Title>Разрешите доступ к фото</Title>)\r\n\t});\r\n\r\n  }\r\nasync\tfunction takePhoto(){\r\n\t\t \r\n\t  if(streaming){\r\n\t \r\n\t\tvar context = canvas.getContext('2d');\r\n\t\tcontext.translate(canvas.width, 0);\r\n\t\tcontext.scale(-1, 1);\r\n\t\tcontext.drawImage(video, 0, 0, whg, heightVid);\r\n\t\tvar base64dataUrl = canvas.toDataURL('image/png');\r\n\t\tsetImageData(base64dataUrl)\r\n\t \r\n\t   setPhotoEnecoded(base64dataUrl)\r\n\r\n\t\t\r\n\t}}\r\n\r\n    window.resizerr = (wh)=>{setwhg(wh)}\r\n\r\n    return (\r\n        <Panel id={id}>\r\n            <PanelHeader>Широкое фото</PanelHeader>\r\n            <Group>\r\n     <img src={imageData}></img>\r\n        <Button  onClick={()=>{initCam(); takePhoto()}} stretched>Фото</Button>\r\n\r\n            {Allert}\r\n            </Group>\r\n        </Panel>\r\n        )\r\n}\r\n\r\nexport default WhidePhoto;","import React, { useState, useEffect } from 'react';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {\n  Epic,\n  Tabbar,\n  View,\n  TabbarItem,\n  SplitCol,\n  Panel,\n  Cell,\n  Group,\n  SplitLayout,\n  PanelHeader,\n  ConfigProvider,\n  AdaptivityProvider,\n  AppRoot,\n  ModalRoot,\n  ModalCard,\n  Button,\n  PopoutWrapper,\n  FormItem,\n  Input,\n  Header,\n  FormLayout,\n  Title,\n  Div,\n  SimpleCell\n} from '@vkontakte/vkui';\n\nimport { Icon16Fullscreen, Icon16ArrowsUpDown } from \"@vkontakte/icons\"\n\nimport ResizePage from \"./panels/ResizePage\"\nimport WhidePhotoPage from \"./panels/WhidePhotoPage.js\";\n\n\nconst App = () => {\n  const [activeStory, setActiveStory] = useState('WhidePhoto');\n\n  const [popout, setPopout] = useState(null);\n\n\n  const onStoryChange = (e) => setActiveStory(e.currentTarget.dataset.story);\n  const isDesktop = window.innerWidth >= 850;\n  const hasHeader = true;\n\n\n\n\n  return (\n\n    <ConfigProvider platform=\"ios\" scheme=\"space_gray\">\n      <AdaptivityProvider>\n        <AppRoot>\n          <SplitLayout\n            popout={popout}\n            header={hasHeader && <PanelHeader separator={false} />}\n            style={{ justifyContent: \"center\" }}\n          >\n            {isDesktop && (\n              <SplitCol fixed width={280} maxWidth={280}>\n                <Panel>\n                  {hasHeader && <PanelHeader />}\n                  <Group>\n\n                    <Cell\n                      disabled={activeStory === 'WhidePhoto'}\n                      style={activeStory === 'WhidePhoto' ? {\n                        backgroundColor: \"var(--button_secondary_background)\",\n                        borderRadius: 8\n                      } : {}}\n                      data-story=\"WhidePhoto\"\n                      onClick={onStoryChange}\n                      before={<Icon16ArrowsUpDown />}\n                    >\n                      Широкое Фото\n                    </Cell>\n\n                    <Cell\n                      disabled={activeStory === 'ResizePhoto'}\n                      style={activeStory === 'ResizePhoto' ? {\n                        backgroundColor: \"var(--button_secondary_background)\",\n                        borderRadius: 8\n                      } : {}}\n                      data-story=\"ResizePhoto\"\n                      onClick={onStoryChange}\n                      before={<Icon16Fullscreen />}\n                    >\n                      Изменить размер фото\n                    </Cell>\n\n                  </Group>\n                </Panel>\n              </SplitCol>\n            )}\n\n            <SplitCol\n              animate={!isDesktop}\n              spaced={isDesktop}\n              width={isDesktop ? '560px' : '100%'}\n              maxWidth={isDesktop ? '560px' : '100%'}\n            >\n              <Epic activeStory={activeStory} tabbar={!isDesktop &&\n                <Tabbar>\n                  <TabbarItem\n                    onClick={onStoryChange}\n                    selected={activeStory === 'WhidePhoto'}\n                    data-story=\"WhidePhoto\"\n                    text=\"Широкое фото\"\n                  ><Icon16ArrowsUpDown /></TabbarItem>\n                  <TabbarItem\n                    onClick={onStoryChange}\n                    selected={activeStory === 'ResizePhoto'}\n                    data-story=\"ResizePhoto\"\n                    text=\"Изменить размер фото\"\n                  ><Icon16Fullscreen /></TabbarItem>\n                </Tabbar>\n              }>\n                <View id=\"WhidePhoto\" activePanel=\"WhidePhoto\">\n                  <WhidePhotoPage id=\"WhidePhoto\" />\n                </View>\n\n                <View id=\"ResizePhoto\" activePanel=\"ResizePhoto\">\n                  <ResizePage id=\"ResizePhoto\" />\n                </View>\n\n              </Epic>\n            </SplitCol>\n          </SplitLayout>\n        </AppRoot>\n      </AdaptivityProvider>\n    </ConfigProvider>\n  );\n}\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}